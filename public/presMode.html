<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PRESENTATION TITLE</title>
    <link href="./CSS/presModeCSS.css" rel="stylesheet">
    <link id="cssLinkID" href="./CSS/BWEditModeCSS.css" rel="stylesheet">
</head>
<body>
<div id="container"></div>

</body>
<script>
    let presentation;
    const container = document.getElementById('container');

    container.addEventListener('click', nextSlide);
    window.addEventListener("keydown", keyPress);

    window.onload = init();
    function init() {
        let logintoken = localStorage.getItem(`logintoken`);
        let loginuser = localStorage.getItem(`loggedin`);

        if(logintoken && loginuser) {
            presentation = JSON.parse(window.localStorage.getItem('presentation'));

            if (!presentation) {
                console.log("no presentation found");
                presentation = {
                    id: undefined,
                    title: "Ye Olde Presentatione",
                    theme: "BW",
                    slides: [`<h1 style="overflow:hidden;">This is about a cat named Tom<br></h1>`,`<h2 style="overflow:hidden;">This is Tom<br></h2>
                <div>
                    <img src="https://images.pexels.com/photos/45201/kitty-cat-kitten-pet-45201.jpeg">
                </div>`,
                `<h2 style="overflow:hidden;">He is:<br></h2>
                <ul style="overflow:hidden;">
                    <li>Cute</li><li>A good cat</li><li>Adorable</li><li>White (not racist I SWEAR!)<br></li><li>An ASSASSIN</li><li>BOO!<br></li>
                </ul>`]
                };
            }
            container.innerHTML = presentation.slides[0];
        }
    }

    let currSlide = 0;


    function nextSlide() {
        currSlide++;
        if(presentation.slides[currSlide]) {
            container.innerHTML = "";
            container.innerHTML = presentation.slides[currSlide];
        }else {
            window.location.href = `editMode.html`;
        }
    }

    function prevSlide() {
        currSlide--;
        if(presentation.slides[currSlide]) {
            container.innerHTML = "";
            container.innerHTML = presentation.slides[currSlide];
        }else {
            container.innerHTML = presentation.slides[0];
        }
    }
    function exitPres() {
        alert("LEAVING PRESENTATION");
        window.location.href = `editMode.html`;
    }

    function keyPress(evt) {
        console.log(evt);
        let key = evt.keyCode;
        switch(key) {
            case 37: prevSlide(); break; // left
            case 38: nextSlide(); break; // up
            case 39: nextSlide(); break; // right
            case 40: prevSlide(); break; // down
            case 32: nextSlide(); break; // space
            case 27: exitPres(); break;  // esc
            case 13: nextSlide(); break; // enter
        }
    }
</script>
</html>